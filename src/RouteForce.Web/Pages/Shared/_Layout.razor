@using Htmx.TagHelpers
@using RouteForce.Web.Sessions
@inherits LayoutComponentBase
@inject HtmxRequestContext Request
@inject IWebHostEnvironment Environment

@{
    if (Request.IsHtmx())
    {
        @Body
    }
    else
    {
        <!DOCTYPE html>
        <html lang="en" data-theme="forest">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <meta name="htmx-config"
                  content='{"indicatorClass":"htmx-indicator","historyCacheSize":20,"antiForgery":{"formFieldName":"__RequestVerificationToken","headerName":"RequestVerificationToken","requestToken":"<token>"}}'/>
            <title>RouteForce - Delivery Tracking</title>

            <link rel="icon" type="image/x-icon" href="assets/favicon.png">

            @if (Environment.IsDevelopment())
            {
                <script type="module" src="http://localhost:5173/@@vite/client"></script>
                <script type="module" src="http://localhost:5173/main.js"></script>
            }
            else
            {
                <link href="/dist/main.css" rel="stylesheet" asp-append-version="true"/>
                <script src="/dist/main.js" type="module" asp-append-version="true"></script>
            }

            <script src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.7/dist/htmx.js" integrity="sha384-yWakaGAFicqusuwOYEmoRjLNOC+6OFsdmwC2lbGQaRELtuVEqNzt11c2J711DeCZ" crossorigin="anonymous"></script>
            <script src="https://unpkg.com/htmx.org/dist/ext/preload.js"></script>
            <script src="https://unpkg.com/htmx.org/dist/ext/remove-me.js"></script>
            <script src="@HtmxAntiforgeryScriptEndpoints.Path" defer></script>
            <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA1MGIolEPye4Bcawk4UhN2hktRcY6xgbE&libraries=places&loading=async" async defer></script>
            <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
            <style>
                [x-cloak] {
                    display: none !important;
                }
            </style>
        </head>
        <body hx-ext="preload, remove-me" hx-boost="true" class="min-h-screen">
            <div id="app" class="h-full">
                @Body
            </div>
        </body>
        </html>
    }
}